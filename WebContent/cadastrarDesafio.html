<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" type="text/css" href="_css/estilo.css">
	<title>Cadastrar Desafio</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
		<script>
			$(document).ready(function() {
				$('#btnEnviar').click(function(event) {
					
					$.ajax({
						url : 'http://localhost:8081/sisalfa-back/addChallenge',
						type : 'POST',	
						data: JSON.stringify({					
    					palavra: $('#palavra').val(),
    					idUsuario: $('#users :selected').val(),
    					idContexto: $('#contexts :selected').val(),
    					imagem: $('#imagem').val(),
    					som: $('#som').val(),
    					video: $('#video').val()}),
    					contentType : "application/json; charset=utf-8",
    					dataType : 'json',
    					success: function (result) {
    	    				alert("Desafio enviado com sucesso!");
                			window.location = "http://localhost:8081/sisalfa-front/sucesso.html";
             			},
             			error: function () {
                 			alert("Erro ao enviar desafio");
             			}
					});
				});	
			});
		</script>
	<script>
		$(document).ready(function(){
			$.getJSON("http://localhost:8081/sisalfa-back/getAllUsers", function(result){
				$.each(result, function(indice, value){
					$("#users").append('<option>' + value.id + '</option>'
					);	
				});
			});
		});
	</script>
	<script>
		$(document).ready(function(){
			$.getJSON("http://localhost:8081/sisalfa-back/getAllContext", function(result){
				$.each(result, function(indice, value){
					$("#contexts").append('<option>' + value.id + '</option>'
					);	
				});
			});
		});
	</script>
</head>
<body>
	<nav>
	<a href="">S i s a l f a</a>
		<ul>
			<li><a href="index.html">Inicio</a></li>
			<li><a href="listarContexto.jsp">Contextos</a></li>
			<li><a href="listarDesafio.jsp">Desafios</a></li>
			<li><a href="">Contribua</a></li>
			<li><a href="sobre.html">Sobre</a></li>
		</ul>
	</nav>
	<form class="formulario" method="POST"> 
		<section id="conteudo">
			<h3>Novo Desafio</h3>
			<div>
				<label>Palavra:</label> 
				<input placeholder="Digite a palavra..." id="palavra" type="text" name="palavra" /><br /> 
			</div>
			
			<div>
				<label>Usuario:</label> 
				<select id="users">
				  
				</select>
				
			<!--<input placeholder="Digite o id..." id="idUsuario"type="text" name="idUsuario" /><br />--> 	
			</div>
			
			
			<div>
				<label>Selecione o Contexto:</label>
				<!--<input placeholder="Digite o id do contexto" id="idContexto"type="text" name="idContexto"/><br>  -->
				<select id="contexts">
				  
				</select>
				
			</div>
			
			<div>
				<label>Imagem:</label> 
				<input type="text"id="imagem" name="fileImagem" size="60" /><br />	
			</div>
			
			<div>
				<label>Som:</label> 
				<input type="text" id="som"name="fileSom" size="60" /><br />	
			</div>
			
			<div>
				<label>Video:</label> 
				<input type="text" id="video"name="fileVideo" size="60" /><br />	
			</div>
			
		</section>
		<input type="submit" id="btnEnviar" class="botao"value="Gravar" />
	

	</form>	
</body>
</html>